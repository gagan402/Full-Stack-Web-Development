<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>pitcher-profile</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://code.jquery.com/jquery-3.7.1.min.js"
      integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
      crossorigin="anonymous"
    ></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
 <style>
  .blue-content
  {
    color:blue;
  }
  .star{
    color:red;
  }

  .input-container {
  position: relative;
}

.input-container input {
  padding-right: 40px; /* Increased space for icon and span */
}

.input-container #errMobile
{
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
}
.input-container  #errMobile {
  right: 20px; /* Adjust this value for desired icon spacing */
  z-index: 1;
}

 </style>
    <script>
      function doPrev(refFile, prevImg) {
        const [file] = refFile.files;
        if (file) {
          prevImg.src = URL.createObjectURL(file);
        }
      }

      $(document).ready(function () {
        doFillEmail();
        function doFillEmail() {
          var activeUserss = localStorage.getItem("activeUser");
          document.querySelector("#txtEmaili").value = activeUserss;
          fetchPitchers();
        }


        var activeUserss=localStorage.getItem("activeUser");
        $("#wuser").html("Welcome : "+activeUserss);



      //   $("#search").click(function(){
      //           fetchPitchers();    
      // });

       function fetchPitchers(){
          var email = $("#txtEmaili").val();
          var obj = {
            type: "get",
            url: "search-json",
            data: {
              em: email,
            },
          };

          $.ajax(obj)
            .done(function (jsonObj) {
              // console.log(jsonObj);
              // alert(JSON.stringify(jsonObj));
              if (jsonObj.length == 1) {
                $("#txtnamei").val(jsonObj[0].namee);
                $("#txtcontacti").val(jsonObj[0].contact);
                $("#txtAddressi").val(jsonObj[0].address);
                $("#txtCityi").val(jsonObj[0].city);
                $("#txtStatei").val(jsonObj[0].state);
                $("#idproofi").val(jsonObj[0].idproof);
                $("#prev").prop("src", "uploads/" + jsonObj[0].proofpic);
                $("#txtfirmi").val(jsonObj[0].firm);
                $("#linkedIni").val(jsonObj[0].linkedin);
                $("#txthdn").val(jsonObj[0].proofpic);

                
                $("#btnsave").prop("disabled",true);
                $("#btnupdate").prop("disabled",false);
                $("#idprooffilei").removeAttr("required");
              } 
              else{
                $("#btnsave").prop("disabled",false);
                $("#btnupdate").prop("disabled",true);
                
              } 
              
            })
            .fail(function (err) {
              console.log(err);
            });
        };

        
        $('#linkedIni').on('dblclick', function() {
        var link = $(this).val();
        window.open(link, '_blank'); 
    });  

    $('#txtfirmi').on('dblclick', function() {
        var link = $(this).val();
        window.open(link, '_blank');
    });  



     //mobile validation
     $("#txtcontacti").on('input',function(){
        var r= /^\d{10}$/;
        var mob=$("#txtcontacti").val();
        const aa=$('#txtcontacti').val();
        if(r.test(mob)==true)
        {
            $("#errMobile").html("✅");
        }
        else
        if(aa=="")
        {
          $("#errMobile").html("");
        }
        else{
            $("#errMobile").html("❌");
        }
    });




      });
    </script>
  </head>
  <body >
    <div class="container border">
      <div class="row">
        <nav class="navbar navbar-expand-lg navbar-light bg-success border">
          <div class="container-fluid">
            <a class="navbar-brand" href="#">Shark Tank</a>
            <h2 id="wuser"></h2>
            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarNav"
              aria-controls="navbarNav"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            
           
          </div>
        </nav>
      </div>

      <div class="row">
        <div class="col-5 offset-5">
          <h3>Your-Profile</h3>
        </div>
      </div>

      <form class="row px-5 g-3" method="post" enctype="multipart/form-data">
        <input type="hidden" id="txthdn" name="hdn" />
        <div class="col-md-12">
          <label for="txtEmaili" class="form-label">Email <span class="star">*</span></label>
          <input
            type="email"
            id="txtEmaili"
            class="form-control"
            name="txtEmail"
            readonly
            required
          />
        </div>

    

        <div class="col-md-6">
          <label for="txtnamei" class="form-label">Name <span class="star">*</span></label>
          <input
            type="text"
            id="txtnamei"
            class="form-control"
            name="txtname"
            required
          />
        </div>

        <div class="col-md-6">
          <label for="txtcontacti" class="form-label">Contact No. <span class="star">*</span></label>
          <div class="input-container ">
          <input
            type="text"
            id="txtcontacti"
            class="form-control"
            name="txtcontact"
            required
          />
          <span id="errMobile"></span>
        </div>
        </div>

        <div class="col-12">
          <label for="txtAddressi" class="form-label">Address <span class="star">*</span></label>
          <input
            type="text"
            id="txtAddressi"
            class="form-control"
            name="txtAddress"
            placeholder="1234 Main St"
            required
          />
        </div>

        <div class="col-md-6">
          <label for="txtCityi" class="form-label">City <span class="star">*</span></label>
          <input
            type="text"
            id="txtCityi"
            class="form-control"
            name="txtCity"
            required
          />
        </div>
        <div class="col-md-6">
          <label for="txtStatei" class="form-label">State <span class="star">*</span></label>
          <select name="txtState" id="txtStatei" class="form-select"required>
            <option disabled selected>Choose State...</option>
            <option value="Andhra Pradesh">Andhra Pradesh</option>
            <option value="Arunachal Pradesh">Arunachal Pradesh</option>
            <option value="Assam">Assam</option>
            <option value="Bihar">Bihar</option>
            <option value="Chhattisgarh">Chhattisgarh</option>
            <option value="Goa">Goa</option>
            <option value="Gujarat">Gujarat</option>
            <option value="Haryana">Haryana</option>
            <option value="Himachal Pradesh">Himachal Pradesh</option>
            <option value="Jharkhand">Jharkhand</option>
            <option value="Karnataka">Karnataka</option>
            <option value="Kerala">Kerala</option>
            <option value="Madhya Pradesh">Madhya Pradesh</option>
            <option value="Maharashtra">Maharashtra</option>
            <option value="Manipur">Manipur</option>
            <option value="Meghalaya">Meghalaya</option>
            <option value="Mizoram">Mizoram</option>
            <option value="Nagaland">Nagaland</option>
            <option value="Odisha">Odisha</option>
            <option value="Punjab">Punjab</option>
            <option value="Rajasthan">Rajasthan</option>
            <option value="Sikkim">Sikkim</option>
            <option value="Tamil Nadu">Tamil Nadu</option>
            <option value="Telangana">Telangana</option>
            <option value="Tripura">Tripura</option>
            <option value="Uttar Pradesh">Uttar Pradesh</option>
            <option value="Uttarakhand">Uttarakhand</option>
            <option value="West Bengal">West Bengal</option>
        </select>
        
        </div>

        <div class="col-md-6">
          <label for="idproofi" class="form-label"> Select Identity Proof  <span class="star">*</span></label>
         

            <select name="idproof" id="idproofi" class="form-select" required>
              <option disabled selected>Choose ID Proof...</option>
              <option value="passport">Passport</option>
              <option value="driver_license">Driver's License</option>
              <option value="voter_id">Voter ID</option>
              <option value="aadhar_card">Aadhar Card</option>
              <option value="pan_card">PAN Card</option>
              <option value="school_id">School ID</option>
            
          </select>
          
        </div>

        <div class="col-md-4">
          <label for="idprooffilei" class="form-label"
            >Upload Identity Proof Picture <span class="star">*</span></label
          >
          <input
            type="file"
            class="form-control"
            name="idprooffile"
            id="idprooffilei"
            accept="image/jpeg, image/png"
            required
            onchange="doPrev(this,prev);"
          />
        </div>
        <div class="col-md-2">
          <img
            src=""
            style="width: 90%; height: 90%; border: 2px solid red"
            id="prev"
          />
        </div>

        <div class="col-12">
          <label for="txtfirmi" class="form-label"
            >Firm/Company Website Link <span class="star">*</span></label
          >
          <input
            type="text"
            id="txtfirmi"
            class="form-control blue-content"
            name="txtfirm"
            required
          />
        </div>

        <div class="col-12">
          <label for="linkedIni" class="form-label">LinkedIn Profile Link <span class="star">*</span></label>
          <input
            type="text"
            id="linkedIni"
            class="form-control blue-content"
            name="linkedIn"
            required
          />
        </div>

        <div class="col-12 d-flex align-items-center justify-content-center">
          <input
            type="submit"
            value="Save"
          
            class="btn btn-primary me-3"
            id="btnsave"
            formaction="/save-data"
          />
        
          <input
            type="submit"
            
            class="btn btn-primary"
            formaction="/update-data"
            id="btnupdate"
            value="Update"
          />
        </div>
      </form>
    </div>
  </body>
</html>
