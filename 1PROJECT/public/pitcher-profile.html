<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>pitcher-profile</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://code.jquery.com/jquery-3.7.1.min.js"
      integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
      crossorigin="anonymous"
    ></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

    <script>
      function doPrev(refFile, prevImg) {
        const [file] = refFile.files;
        if (file) {
          prevImg.src = URL.createObjectURL(file);
        }
      }

      $(document).ready(function () {
        doFillEmail();
        function doFillEmail() {
          var activeUserss = localStorage.getItem("activeUser");
          document.querySelector("#txtEmaili").value = activeUserss;
          fetchPitchers();
        }


        var activeUserss=localStorage.getItem("activeUser");
        $("#wuser").html("Welcome : "+activeUserss);



      //   $("#search").click(function(){
      //           fetchPitchers();    
      // });

       function fetchPitchers(){
          var email = $("#txtEmaili").val();
          var obj = {
            type: "get",
            url: "search-json",
            data: {
              em: email,
            },
          };

          $.ajax(obj)
            .done(function (jsonObj) {
              // console.log(jsonObj);
              // alert(JSON.stringify(jsonObj));
              if (jsonObj.length == 1) {
                $("#txtnamei").val(jsonObj[0].namee);
                $("#txtcontacti").val(jsonObj[0].contact);
                $("#txtAddressi").val(jsonObj[0].address);
                $("#txtCityi").val(jsonObj[0].city);
                $("#txtStatei").val(jsonObj[0].state);
                $("#idproofi").val(jsonObj[0].idproof);
                $("#prev").prop("src", "uploads/" + jsonObj[0].proofpic);
                $("#txtfirmi").val(jsonObj[0].firm);
                $("#linkedIni").val(jsonObj[0].linkedin);
                $("#txthdn").val(jsonObj[0].proofpic);

                // $("#btnupdate").removeAttr("disabled");
              } 
            })
            .fail(function (err) {
              console.log(err);
            });
        };
      });
    </script>
  </head>
  <body >
    <div class="container border">
      <div class="row">
        <nav class="navbar navbar-expand-lg navbar-light bg-success border">
          <div class="container-fluid">
            <a class="navbar-brand" href="#">Shark Tank</a>
            <h2 id="wuser"></h2>
            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarNav"
              aria-controls="navbarNav"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            
            <!-- <div class="collapse navbar-collapse" id="navbarNav">
              <ul class="navbar-nav ms-auto">
                <h5> Welcome : gagandeepg973@gmail.com</h5>
              </ul>
            </div> -->
          </div>
        </nav>
      </div>

      <div class="row">
        <div class="col-5 offset-5">
          <h3>Pitcher-Profile</h3>
        </div>
      </div>

      <form class="row px-5 g-3" method="post" enctype="multipart/form-data">
        <input type="hidden" id="txthdn" name="hdn" />
        <div class="col-md-12">
          <label for="txtEmaili" class="form-label">Email</label>
          <input
            type="email"
            id="txtEmaili"
            class="form-control"
            name="txtEmail"
          />
        </div>

        <!-- <div class="col-md-6">
          <button type="button" class="btn btn-primary mt-4" id="search">
            Search
          </button>
        </div> -->

        <div class="col-md-6">
          <label for="txtnamei" class="form-label">Name</label>
          <input
            type="text"
            id="txtnamei"
            class="form-control"
            name="txtname"
          />
        </div>

        <div class="col-md-6">
          <label for="txtcontacti" class="form-label">Contact No.</label>
          <input
            type="text"
            id="txtcontacti"
            class="form-control"
            name="txtcontact"
          />
        </div>

        <div class="col-12">
          <label for="txtAddressi" class="form-label">Address</label>
          <input
            type="text"
            id="txtAddressi"
            class="form-control"
            name="txtAddress"
            placeholder="1234 Main St"
          />
        </div>

        <div class="col-md-6">
          <label for="txtCityi" class="form-label">City</label>
          <input
            type="text"
            id="txtCityi"
            class="form-control"
            name="txtCity"
          />
        </div>
        <div class="col-md-6">
          <label for="txtStatei" class="form-label">State</label>
          <select name="txtState" id="txtStatei" class="form-select">
            <option disabled>Choose...</option>
            <option>1</option>
          </select>
        </div>

        <div class="col-md-6">
          <label for="idproofi" class="form-label">Identity Proof</label>
          <select name="idproof" id="idproofi" class="form-select">
            <option selected>Choose...</option>
            <option>1</option>
          </select>
        </div>

        <div class="col-md-4">
          <label for="idprooffilei" class="form-label"
            >Upload Identity Proof Picture:</label
          >
          <input
            type="file"
            class="form-control"
            name="idprooffile"
            if="idprooffilei"
            onchange="doPrev(this,prev);"
          />
        </div>
        <div class="col-md-2">
          <img
            src="images/profile-icon.jpg"
            style="width: 90%; height: 90%; border: 2px solid red"
            id="prev"
          />
        </div>

        <div class="col-12">
          <label for="txtfirmi" class="form-label"
            >Firm/Company Website Link:</label
          >
          <input
            type="text"
            id="txtfirmi"
            class="form-control"
            name="txtfirm"
          />
        </div>

        <div class="col-12">
          <label for="linkedIni" class="form-label">LinkedIn Profile</label>
          <input
            type="text"
            id="linkedIni"
            class="form-control"
            name="linkedIn"
          />
        </div>

        <div class="col-12 d-flex align-items-center justify-content-center">
          <input
            type="submit"
            value="Save"
          
            class="btn btn-primary me-3"
            id="btnsave"
            formaction="/save-data"
          />
          <!-- <button type="submit" class="btn btn-primary me-3" formaction="/save-data">Save</button> -->
          <input
            type="submit"
            
            class="btn btn-primary"
            formaction="/update-data"
            id="btnupdate"
            value="Update"
          />
        </div>
      </form>
    </div>
  </body>
</html>
