<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>dash-shark</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />


    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <style>
      .input-container {
      position: relative;
    }
    
    .input-container input {
      padding-right: 40px; /* Increased space for icon and span */
    }
    
    .input-container #togglePassword
    {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
    }
    .input-container #togglePassword
    {
      right: 7px; /* Adjust this value for desired span spacing */
    }
    
    </style>
<script>
  function checkStorage(){
    if(localStorage.getItem("activeUser")==null)
    {
      wnidow.location.reload(true);
      window.location.replace("/");
    }
  }
  // jQuery script to handle modal opening
  $(document).ready(function () {


    var activeUserss=localStorage.getItem("activeUser");
    $("#wuser").html("Welcome : "+activeUserss);
    // alert(activeUserss);

    $('#changePasswordButton').click(function () {
      $('#changePasswordModal').modal('show');
    });


    $("#btnChangePwd").click(function(){
      var currp= $("#currentPassword").val();
      var newp =$("#newPassword").val();
      var confirmp=$("#confirmPassword").val();

      var obj={
        type:"get",
        url:"/change-pwd",
        data:{
          cp:currp,
          np:newp,
          em:localStorage.getItem("activeUser")
        }
      }

      $.ajax(obj).done(function(res){
        alert(JSON.stringify(res));

      }).fail(function(err)
      {
        alert(err);
        console.log(err);

      });

      
    })


    $("#btnlogout").click(function(){
      if(confirm("You want to logout?")){
      localStorage.removeItem("activeUser");
      location.href="/";

      }

    });



    $(".hi").mousedown(function(){
            $(".hi").removeClass("fa-eye").addClass("fa-eye-slash");
            $("#currentPassword").prop("type","text");

    });

    $(".hi").mouseup(function(){
        $(".hi").removeClass("fa-eye-slash").addClass("fa-eye");
            $("#currentPassword").prop("type","password");
           

    });



    $(".hii").mousedown(function(){
            $(".hii").removeClass("fa-eye").addClass("fa-eye-slash");
            $("#newPassword").prop("type","text");

    });

    $(".hii").mouseup(function(){
        $(".hii").removeClass("fa-eye-slash").addClass("fa-eye");
            $("#newPassword").prop("type","password");
           

    });

    $(".hiy").mousedown(function(){
            $(".hiy").removeClass("fa-eye").addClass("fa-eye-slash");
            $("#confirmPassword").prop("type","text");

    });

    $(".hiy").mouseup(function(){
        $(".hiy").removeClass("fa-eye-slash").addClass("fa-eye");
            $("#confirmPassword").prop("type","password");
           

    });
  });
</script>


  </head>
  <body onload="checkStorage();">
    <div class="container border">
      <div class="row">
        
        <nav class="navbar navbar-expand-lg navbar-light bg-success border">
          <div class="container-fluid">
            <a class="navbar-brand" href="#">Shark Tank</a>
            <h3 id="wuser"></h3>

            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarNav"
              aria-controls="navbarNav"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarNav">
              <ul class="navbar-nav ms-auto">
                <li class="nav-item">
                  <button class="btn btn-primary" id="btnlogout">LOGOUT</button>
                </li>
              </ul>
            </div>
          </div>
        </nav>
      </div>

      <div class="row  border border-danger justify-content-around">

        <div class="modal fade" id="changePasswordModal" tabindex="-1" aria-labelledby="changePasswordModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="changePasswordModalLabel">Change Password</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <!-- Form for changing password -->
                <form>
                  <div class="mb-3">
                    <label for="currentPassword" class="form-label">Current Password</label>
                    <div class="input-container">
                    <input type="password" class="form-control" id="currentPassword">
                    <i  id="togglePassword" class="fa-solid fa-eye  fa-sm  hi"></i>
                  </div>
                  </div>
                  <div class="mb-3">
                    <label for="newPassword" class="form-label">New Password</label>
                    <div class="input-container">
                    <input type="password" class="form-control" id="newPassword">
                    <i  id="togglePassword" class="fa-solid fa-eye  fa-sm  hii"></i>
                  </div>
                  </div>
                  <div class="mb-3">
                    <label for="confirmPassword" class="form-label">Confirm Password</label>
                    <div class="input-container">
                    <input type="password" class="form-control" id="confirmPassword">
                    <i  id="togglePassword" class="fa-solid fa-eye  fa-sm  hiy"></i>
                  </div>
                  </div>
                
                  <button type="button" class="btn btn-primary" id="btnChangePwd">Save Changes</button>
                </form>
              </div>
            </div>
          </div>
        </div>



        <!-- profile card -->
        <div class="col">
            <div class="card" style="width: 18rem;">
                <img src="images/shark-tank-india.avif" class="card-img-top" alt="no pic">
                <div class="card-body d-flex justify-content-center align-items-center">
                  <a href="shark-profile.html" target="_blank"class="btn btn-primary"> Shark Profile</a>
                </div>
              </div>
    
            
        </div>
        
     
      <!-- find-pitchers -->
        <div class="col">
            <div class="card" style="width: 18rem;">
                <img src="images/shark-tank-india.avif" class="card-img-top" alt="no pic">
                <div class="card-body d-flex justify-content-center align-items-center">
                  <a href="pitcher-finder.html" target="_blank" class="btn btn-primary">Find Pitchers</a>
                </div>
            </div>
    
            
        </div>
        <!-- change password -->

         <div class="col ">
            <div class="card" style="width: 18rem;">
                <img src="images/shark-tank-india.avif" class="card-img-top" alt="no pic">
                <div class="card-body d-flex justify-content-center align-items-center">
                  <a href="#" class="btn btn-primary" id="changePasswordButton">Change Password</a>
                </div>
              </div>
    
            
        </div>
          


       

      </div>
    </div>




    
  </body>
</html>
