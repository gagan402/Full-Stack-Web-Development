<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>shark-profile</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>

    <script
      src="https://code.jquery.com/jquery-3.7.1.min.js"
      integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
      crossorigin="anonymous"
    ></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

    <style>
      .star {
        color: red;
      }

      .blue-content {
        color: blue;
      }

      .input-container {
        position: relative;
      }

      .input-container input {
        padding-right: 40px;
      }

      .input-container #errMobile,
      .input-container #errWorth
       {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
      }
      .input-container #errMobile,
      .input-container #errWorth {
        right: 15px;
        z-index: 1;
      }
    </style>
    <script>
      $(document).ready(function () {
        displayUser();
        function displayUser() {
          var activeUserss = localStorage.getItem("activeUser");
          document.querySelector("#wuser").innerHTML =
            "Welcome : " + activeUserss;
          document.querySelector("#txtEmaili").value = activeUserss;
          fetchSharks();
        }

        function fetchSharks() {
          var email = $("#txtEmaili").val();
          var obj = {
            type: "get",
            url: "search-shark",
            data: {
              em: email,
            },
          };

          $.ajax(obj)
            .done(function (jsonObj) {
              if (jsonObj.length == 1) {
                $("#txtnamei").val(jsonObj[0].namee);
                $("#txtcontacti").val(jsonObj[0].contact);
                $("#txtCompanyi").val(jsonObj[0].company);
                $("#txtWebsitei").val(jsonObj[0].website);
                $("#netWorthi").val(jsonObj[0].worth);
                $("#fundedi").val(jsonObj[0].funded);
                $("#otherinfo").val(jsonObj[0].info);

                $("#btnsave").prop("disabled", true);
                $("#btnupdate").prop("disabled", false);
              } else {
                $("#btnsave").prop("disabled", false);
                $("#btnupdate").prop("disabled", true);
              }
            })
            .fail(function (err) {
              console.log(err);
            });
        }

        //mobile validation
        $("#txtcontacti").on("input", function () {
          var r = /^\d{10}$/;
          var mob = $("#txtcontacti").val();

          const aa = $("#txtcontacti").val();
          if (r.test(mob) == true) {
            $("#errMobile").html("✅");
          } else if (aa == "") {
            $("#errMobile").html("");
          } else {
            $("#errMobile").html("❌");
          }
        });

        $("#netWorthi").on("input", function () {
          var numericValue = $(this).val().replace(/\D/g, ""); // Remove non-digit characters

          // Update the input field value to contain only digits
          $(this).val(numericValue);

          // Check if the value is not empty (optional)
          if (numericValue === "") {
            $("#errWorth").html(""); // Clear error message if field is empty
          } else {
            $("#errWorth").html("✅"); // Indicate that only numbers are allowed
          }
        });

        $("#txtWebsitei").on("dblclick", function () {
          var link = $(this).val();
          window.open(link, "_blank");
        });
      });
    </script>
    <script></script>
  </head>
  <body>
    <div class="container">
      <div class="row">
        <nav class="navbar navbar-expand-lg navbar-light bg-success border">
          <div class="container-fluid">
            <a class="navbar-brand" href="#">Shark Tank</a>
            <h2 id="wuser"></h2>
            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarNav"
              aria-controls="navbarNav"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
          </div>
        </nav>
      </div>

      <div class="row"></div>

      <form class="row px-5 g-3" method="post">
        <div class="col-md-12">
          <h3>Shark Profile</h3>
        </div>

        <div class="col-md-12">
          <label for="txtEmaili" class="form-label"
            >Email <span class="star">*</span></label
          >
          <input
            type="email"
            id="txtEmaili"
            class="form-control"
            name="txtEmail"
            readonly
            required
          />
        </div>

        <div class="col-md-6">
          <label for="txtnamei" class="form-label"
            >Name <span class="star">*</span></label
          >
          <input
            type="text"
            id="txtnamei"
            class="form-control"
            name="txtname"
            required
          />
        </div>

        <div class="col-md-6">
          <label for="txtcontacti" class="form-label"
            >Contact No. <span class="star">*</span></label
          >
          <div class="input-container">
            <input
              type="text"
              id="txtcontacti"
              class="form-control"
              name="txtcontact"
              required
            />
            <span id="errMobile"></span>
          </div>
        </div>

        <div class="col-12">
          <label for="txtCompanyi" class="form-label"
            >Name Of Your Company <span class="star">*</span></label
          >
          <input
            type="text"
            id="txtCompanyi"
            class="form-control"
            name="txtCompany"
            required
          />
        </div>

        <div class="col-12">
          <label for="txtWebsitei" class="form-label"
            >Company Website Link <span class="star">*</span></label
          >
          <input
            type="text"
            id="txtWebsitei"
            class="form-control blue-content"
            name="txtWebsite"
            required
          />
        </div>

        <div class="col-12">
          <label for="netWorthi" class="form-label"
            >Net Worth of Your Company <span class="star">*</span></label
          >
          <div class="input-container">
            <input
              type="text"
              id="netWorthi"
              class="form-control"
              name="netWorth"
              required
            />
            <span id="errWorth"></span>
          </div>
        </div>
        <div class="col-12">
          <label for="fundedi" class="form-label"
            >Already Funded How Many Companies
            <span class="star">*</span></label
          >
          <input
            type="number"
            id="fundedi"
            class="form-control"
            name="funded"
            max="100"
            min="0"
            required
          />
        </div>

        <div class="col-12">
          <label for="otherinfo" class="form-label">Other Information </label>
          <textarea
            class="form-control"
            id="otherinfo"
            rows="3"
            name="Ninfo"
          ></textarea>
        </div>

        <div class="col-12 d-flex align-items-center justify-content-center">
          <input
            type="submit"
            value="Save"
            class="btn btn-primary me-3"
            id="btnsave"
            formaction="/save-shark-data"
          />
          <input
            type="submit"
            class="btn btn-primary"
            formaction="/update-shark-data"
            id="btnupdate"
            value="Update"
          />
        </div>
      </form>
    </div>
  </body>
</html>
